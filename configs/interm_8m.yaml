#-----------   TRAINER -------------
trainer:
  max_epochs: 100
  checkpoint: 
  checkpoint_folder: "climate"
  pretrain:
  batch_size: 64
  buffer_size: 500
  num_workers: 2
  data_type: bfloat16
  train_loss: "bayesian_tv"

#----------  Parallelism -------------
parallelism:
  fsdp: 16
  simple_ddp: 2048
  tensor_par: 1
  seq_par: 1


### Tiling
tiling:
  do_tiling: True
  div: 4
  overlap: 3
  
# ---------------------------- MODEL -------------------------------------------
model:
  preset: res_slimvit
  lr: 2e-3
  weight_decay: 1e-5
  beta_1: 0.9
  beta_2: 0.99
  warmup_epochs: 2
  warmup_start_lr: 1e-7
  eta_min: 1e-8
  superres_mag: 4
  cnn_ratio: 4
  patch_size: 2
  embed_dim: 256
  depth: 6
  decoder_depth: 4
  num_heads: 4
  mlp_ratio: 4
  drop_path: 0.1
  drop_rate: 0.1
  adaptive_patching: False
  fixed_length: {
#    'ERA5_1': 127,
    'ERA5_2': 4051,
#    'PRISM': 4051,
#    'DAYMET_1': 4051,
#    'DAYMET_2': 4051,
  }
  smooth: {
#    'ERA5_1': [1,3,5],
    'ERA5_2': [1,3,5],
#    'PRISM': [1,3,5],
#    'DAYMET_1': [1,3,5],
#    'DAYMET_2': [1,3,5],
  }
  canny_tol: {
#    'ERA5_1': [.1,.2],
    'ERA5_2': [.1,.2],
#    'PRISM': [.1,.2],
#    'DAYMET_1': [.1,.2],
#    'DAYMET_2': [.1,.2],
  }

# ---------------------------- DATA -------------------------------------------
data:
  low_res_dir: {
## (25/03/09) new variable names
    'ERA5_1': "/lustre/orion/lrn036/world-shared/data/superres/era5/1.0_deg/",
    'ERA5_2': "/lustre/orion/lrn036/world-shared/data/superres/era5/1.0_deg/",
    'PRISM': "/lustre/orion/lrn036/world-shared/data/superres/prism/10.0_arcmin",
    "GCM-ACCESS": "/lustre/orion/world-shared/lrn036/data/superres/GCM-ACCESS-CM2/10.0_arcmin",
    "GCM-BCC": "/lustre/orion/world-shared/lrn036/data/superres/GCM-BCC-CSM2-MR/10.0_arcmin",
    "GCM-CNRM": "/lustre/orion/world-shared/lrn036/data/superres/GCM-CNRM-ESM2-1/10.0_arcmin",
    "GCM-MPI": "/lustre/orion/world-shared/lrn036/data/superres/GCM-MPI-ESM1-2-HR/10.0_arcmin/",
    "GCM-MRI": "/lustre/orion/world-shared/lrn036/data/superres/GCM-MRI-ESM2-0/10.0_arcmin/",
    "GCM-NorESM2-MM ": "/lustre/orion/world-shared/lrn036/data/superres/GCM-NorESM2-MM/10.0_arcmin/",
    "RegCM-ACCESS": "/lustre/orion/world-shared/lrn036/data/superres/RegCM-ACCESS-CM2/10.0_arcmin",
    "RegCM-BCC": "/lustre/orion/world-shared/lrn036/data/superres/RegCM-BCC-CSM2-MR/10.0_arcmin",
    "RegCM-CNRM": "/lustre/orion/world-shared/lrn036/data/superres/RegCM-CNRM-ESM2-1/10.0_arcmin",
    "RegCM-MPI": "/lustre/orion/world-shared/lrn036/data/superres/RegCM-MPI-ESM1-2-HR/10.0_arcmin/",
    "RegCM-MRI": "/lustre/orion/world-shared/lrn036/data/superres/RegCM-MRI-ESM2-0/10.0_arcmin/",
    "RegCM-NorESM2-MM ": "/lustre/orion/world-shared/lrn036/data/superres/RegCM-NorESM2-MM/10.0_arcmin/",
    "DAYMET_1": "/lustre/orion/lrn036/world-shared/data/superres/daymet/10.0_arcmin",
#    'DAYMET_2': "/lustre/orion/lrn036/world-shared/data/superres/daymet/2.0_arcmin",
# old datasets
#    'ERA5_1': "/lustre/orion/lrn036/world-shared/ERA5_npz/5.625_deg/",
#    'ERA5_1': "/lustre/orion/world-shared/lrn036/jyc/frontier/ClimaX-v2/data/ERA5-1hr-superres/5.625_deg/",
#    'ERA5_2': "/lustre/orion/world-shared/lrn036/jyc/frontier/ClimaX-v2/data/ERA5-1hr-superres/1.0_deg/",
#    'PRISM': "/lustre/orion/world-shared/lrn036/jyc/frontier/ClimaX-v2/data/prism-superres/10.0_arcmin/",
  }
  high_res_dir: {
## (25/03/09) new variable names
    'ERA5_1': "/lustre/orion/lrn036/world-shared/data/superres/era5/0.25_deg/",
    'ERA5_2': "/lustre/orion/lrn036/world-shared/data/superres/era5/0.25_deg/",
    'PRISM': "/lustre/orion/lrn036/world-shared/data/superres/prism/2.5_arcmin",
    "GCM-ACCESS": "/lustre/orion/world-shared/lrn036/data/superres/GCM-ACCESS-CM2/2.5_arcmin",
    "GCM-BCC": "/lustre/orion/world-shared/lrn036/data/superres/GCM-BCC-CSM2-MR/2.5_arcmin",
    "GCM-CNRM": "/lustre/orion/world-shared/lrn036/data/superres/GCM-CNRM-ESM2-1/2.5_arcmin",
    "GCM-MPI": "/lustre/orion/world-shared/lrn036/data/superres/GCM-MPI-ESM1-2-HR/2.5_arcmin/",
    "GCM-MRI": "/lustre/orion/world-shared/lrn036/data/superres/GCM-MRI-ESM2-0/2.5_arcmin/",
    "GCM-NorESM2": "/lustre/orion/world-shared/lrn036/data/superres/GCM-NorESM2-MM/2.5_arcmin/",
    "RegCM-ACCESS": "/lustre/orion/world-shared/lrn036/data/superres/RegCM-ACCESS-CM2/2.5_arcmin",
    "RegCM-BCC": "/lustre/orion/world-shared/lrn036/data/superres/RegCM-BCC-CSM2-MR/2.5_arcmin",
    "RegCM-CNRM": "/lustre/orion/world-shared/lrn036/data/superres/RegCM-CNRM-ESM2-1/2.5_arcmin",
    "RegCM-MPI": "/lustre/orion/world-shared/lrn036/data/superres/RegCM-MPI-ESM1-2-HR/2.5_arcmin/",
    "RegCM-MRI": "/lustre/orion/world-shared/lrn036/data/superres/RegCM-MRI-ESM2-0/2.5_arcmin/",
    "RegCM-NorESM2": "/lustre/orion/world-shared/lrn036/data/superres/RegCM-NorESM2-MM/2.5_arcmin/",
    "DAYMET_1": "/lustre/orion/lrn036/world-shared/data/superres/daymet/2.5_arcmin",
#    'DAYMET_2': "/lustre/orion/lrn036/world-shared/data/superres/daymet/0.5_arcmin",
# old datasets
#    'ERA5_1': "/lustre/orion/lrn036/world-shared/ERA5_npz/1.40625_deg/",
#    'ERA5_1': "/lustre/orion/world-shared/lrn036/jyc/frontier/ClimaX-v2/data/ERA5-1hr-superres/1.40625_deg/",
#    'ERA5_2': "/lustre/orion/world-shared/lrn036/jyc/frontier/ClimaX-v2/data/ERA5-1hr-superres/0.25_deg/",
#    'PRISM': "/lustre/orion/world-shared/lrn036/jyc/frontier/ClimaX-v2/data/prism-superres/2.5_arcmin/",
  }
  # input spatial resolution in km
  spatial_resolution: {
    'ERA5_1': 625,
    'ERA5_2': 111,
    'PRISM':  18,
    'DAYMET_1':  18,
    'GCM-ACCESS': 18,
    'GCM-BCC': 18,
    'GCM-CNRM': 18,
    'GCM-MPI': 18,
    'GCM-MRI': 18,
    'GCM-NorESM2': 18,
    'RegCM-ACCESS': 18,
    'RegCM-BCC': 18,
    'RegCM-CNRM': 18,
    'RegCM-MPI': 18,
    'RegCM-MRI': 18,
    'RegCM-NorESM2': 18,
    'DAYMET_2':  4,
  }

  default_vars: [
    "land_sea_mask",
    "orography",
    "lattitude",
    "landcover",
    "2m_temperature",
    "2m_temperature_max",
    "2m_temperature_min",
    "temperature_200",
    "temperature_500",
    "temperature_850",
    "10m_u_component_of_wind",
    "u_component_of_wind_200",
    "u_component_of_wind_500",
    "u_component_of_wind_850",
    "10m_v_component_of_wind",
    "v_component_of_wind_200",
    "v_component_of_wind_500",
    "v_component_of_wind_850",
    "specific_humidity_200",
    "specific_humidity_500",
    "specific_humidity_850",
    "total_precipitation_24hr",
    "volumetric_soil_water_layer_1",
  ]
  
  dict_in_variables: {
    'ERA5_1': [
    "land_sea_mask",
    "orography",
    "lattitude",
    "landcover",
    "2m_temperature",
    "2m_temperature_max",
    "2m_temperature_min",
    "temperature_200",
    "temperature_500",
    "temperature_850",
    "10m_u_component_of_wind",
    "u_component_of_wind_200",
    "u_component_of_wind_500",
    "u_component_of_wind_850",
    "10m_v_component_of_wind",
    "v_component_of_wind_200",
    "v_component_of_wind_500",
    "v_component_of_wind_850",
    "specific_humidity_200",
    "specific_humidity_500",
    "specific_humidity_850",
    "total_precipitation_24hr",
    "volumetric_soil_water_layer_1",
    ],
    'ERA5_2': [
    "land_sea_mask",
    "orography",
    "lattitude",
    "landcover",
    "2m_temperature",
    "2m_temperature_max",
    "2m_temperature_min",
    "temperature_200",
    "temperature_500",
    "temperature_850",
    "10m_u_component_of_wind",
    "u_component_of_wind_200",
    "u_component_of_wind_500",
    "u_component_of_wind_850",
    "10m_v_component_of_wind",
    "v_component_of_wind_200",
    "v_component_of_wind_500",
    "v_component_of_wind_850",
    "specific_humidity_200",
    "specific_humidity_500",
    "specific_humidity_850",
    "total_precipitation_24hr",
    "volumetric_soil_water_layer_1",
    ],
    'PRISM': [
      "land_sea_mask",
      "orography",
      "lattitude",
      "landcover",
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'GCM-ACCESS': [
      "land_sea_mask",
      "orography",
      "lattitude",
      "landcover",
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],

    'GCM-BCC': [
      "land_sea_mask",
      "orography",
      "lattitude",
      "landcover",
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'GCM-CNRM': [
      "land_sea_mask",
      "orography",
      "lattitude",
      "landcover",
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'GCM-MPI': [
      "land_sea_mask",
      "orography",
      "lattitude",
      "landcover",
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'GCM-MRI': [
      "land_sea_mask",
      "orography",
      "lattitude",
      "landcover",
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'GCM-NorESM2': [
      "land_sea_mask",
      "orography",
      "lattitude",
      "landcover",
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'RegCM-ACCESS': [
      "land_sea_mask",
      "orography",
      "lattitude",
      "landcover",
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'RegCM-BCC': [
      "land_sea_mask",
      "orography",
      "lattitude",
      "landcover",
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'RegCM-CNRM': [
      "land_sea_mask",
      "orography",
      "lattitude",
      "landcover",
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'RegCM-MPI': [
      "land_sea_mask",
      "orography",
      "lattitude",
      "landcover",
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'RegCM-MRI': [
      "land_sea_mask",
      "orography",
      "lattitude",
      "landcover",
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'RegCM-NorESM2': [
      "land_sea_mask",
      "orography",
      "lattitude",
      "landcover",
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],

    'DAYMET_1': [
      "land_sea_mask",
      "orography",
      "lattitude",
      "landcover",
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'DAYMET_2': [
      "land_sea_mask",
      "orography",
      "lattitude",
      "landcover",
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],

  }

  dict_out_variables: {
    'ERA5_1':[
        "total_precipitation_24hr",
        "2m_temperature_min",
        "2m_temperature_max",
#        "10m_u_component_of_wind",
#        "10m_v_component_of_wind",
    ],
    'ERA5_2':[
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
#      "10m_u_component_of_wind",
#      "10m_v_component_of_wind",
    ],
    'PRISM': [
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'GCM-ACCESS': [
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'GCM-BCC': [
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'GCM-CNRM': [
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'GCM-MPI': [
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'GCM-MRI': [
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'GCM-NorESM2': [
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'RegCM-ACCESS': [
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'RegCM-BCC': [
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'RegCM-CNRM': [
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'RegCM-MPI': [
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'RegCM-MRI': [
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'RegCM-NorESM2': [
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],

    'DAYMET_1': [
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
    'DAYMET_2': [
      "total_precipitation_24hr",
      "2m_temperature_min",
      "2m_temperature_max",
    ],
  }


  var_weights: {
    "2m_temperature": 10,
    "10m_u_component_of_wind": 1,
    "10m_v_component_of_wind": 1,
    "total_precipitation_24hr": 1,
    "2m_temperature_min": 10,
    "2m_temperature_max": 10,
  }



